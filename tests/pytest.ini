# =============================================================================
# Notification Service - Test Framework Configuration
# =============================================================================
# Pytest configuration with plugins for comprehensive testing

[pytest]
# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Markers for test categorization
markers =
    smoke: Quick sanity checks (run first)
    api: API endpoint tests
    integration: Integration tests
    e2e: End-to-end tests
    performance: Performance/load tests
    security: Security tests
    unit: Unit tests
    auth: Authentication tests
    notifications: Notification flow tests
    channels: Channel configuration tests
    templates: Template management tests
    clients: API client tests
    audit: Audit log tests
    database: Database tests
    slow: Tests that take > 5 seconds

# Default options
addopts = 
    -v
    --tb=short
    --strict-markers
    -ra
    --color=yes
    --code-highlight=yes

# Timeout for tests (seconds)
timeout = 30
timeout_method = thread

# Async mode
asyncio_mode = auto

# Coverage configuration
[coverage:run]
source = .
branch = True
omit = 
    tests/*
    */__pycache__/*
    */migrations/*

[coverage:report]
exclude_lines =
    pragma: no cover
    def __repr__
    raise AssertionError
    raise NotImplementedError
    if __name__ == .__main__.:
show_missing = True
precision = 2
fail_under = 80

[coverage:html]
directory = reports/coverage

# Tool configurations
[tool:isort]
profile = black
line_length = 100
skip_gitignore = true

[flake8]
max-line-length = 100
exclude = .git,__pycache__,build,dist
ignore = E203,W503

[mypy]
python_version = 3.11
warn_return_any = True
warn_unused_ignores = True
disallow_untyped_defs = True
